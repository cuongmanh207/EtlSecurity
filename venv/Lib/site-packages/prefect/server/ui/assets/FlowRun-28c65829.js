import{d as h,g as v,f as p,o as t,m as E,Q as R,n as w,u as a,ag as G,ah as O,a7 as V,_ as q,e as A,R as D,ai as L,aj as Q,ak as $,I as z,al as J,am as K,an as H,ao as M,i as m,c as o,j as u,ap as W,a as r,aq as X,ar as Y,as as Z,at as ee,au as ae,av as le,aw as se,x as te,af as b,ax as ne}from"./index-ac1bd61a.js";import{u as oe}from"./usePageTitle-4ac27103.js";const ue={class:"flow-run-graphs__graphs"},re={class:"flow-run-graphs__panel p-background"},pe=h({__name:"FlowRunGraphs",props:{flowRun:{}},setup(k){const d=v(),f=v(!1),e=v(null),c=p(()=>({root:{"flow-run-graphs--fullscreen":f.value,"flow-run-graphs--show-panel":!!e.value}}));return(_,n)=>(t(),E("div",{class:V(["flow-run-graphs",c.value.root])},[R("div",ue,[w(a(G),{fullscreen:f.value,"onUpdate:fullscreen":n[0]||(n[0]=s=>f.value=s),viewport:d.value,"onUpdate:viewport":n[1]||(n[1]=s=>d.value=s),selected:e.value,"onUpdate:selected":n[2]||(n[2]=s=>e.value=s),"flow-run":_.flowRun,class:"flow-run-graphs__flow-run"},null,8,["fullscreen","viewport","selected","flow-run"])]),R("div",re,[w(a(O),{node:e.value,"onUpdate:node":n[3]||(n[3]=s=>e.value=s),floating:f.value},null,8,["node","floating"])])],2))}});const ce=h({__name:"FlowRun",setup(k){const d=q(),f=A("flowRunId");D();const{flowRun:e,subscription:c}=L(f,{interval:5e3}),_=p(()=>{var l;return(l=e.value)==null?void 0:l.deploymentId}),{deployment:n}=Q(_),s=p(()=>{var l;return(l=e.value)!=null&&l.stateType?$(e.value.stateType):!0}),x=p(()=>[{label:"Logs"},{label:"Task Runs",hidden:s.value},{label:"Subflow Runs",hidden:s.value},{label:"Results",hidden:s.value},{label:"Artifacts",hidden:s.value},{label:"Details"},{label:"Parameters"}]),i=z("tab","Logs"),{tabs:S}=J(x,i),T=p(()=>{var l;return((l=e.value)==null?void 0:l.parameters)??{}}),F=p(()=>{var l;return((l=n.value)==null?void 0:l.parameterOpenApiSchema)??{}}),g=p(()=>K(T.value,F.value));function I(){d.push(b.flowRuns())}const C=p(()=>{var l;return(l=e.value)==null?void 0:l.stateType});H(C);const U=p(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return oe(U),M(()=>{c.error&&ne(c.error).isInRange("clientError")&&d.replace(b[404]())}),(l,y)=>{const B=m("p-code-highlight"),P=m("p-tabs"),j=m("p-layout-default");return t(),o(j,{class:"flow-run"},{header:u(()=>[a(e)?(t(),o(a(W),{key:0,"flow-run-id":a(e).id,onDelete:I},null,8,["flow-run-id"])):r("",!0)]),default:u(()=>[a(e)&&!s.value?(t(),o(pe,{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0),w(P,{selected:a(i),"onUpdate:selected":y[0]||(y[0]=N=>te(i)?i.value=N:null),tabs:a(S)},{details:u(()=>[a(e)?(t(),o(a(X),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),logs:u(()=>[a(e)?(t(),o(a(Y),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),results:u(()=>[a(e)?(t(),o(a(Z),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),artifacts:u(()=>[a(e)?(t(),o(a(ee),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),"task-runs":u(()=>[a(e)?(t(),o(a(ae),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):r("",!0)]),"subflow-runs":u(()=>[a(e)?(t(),o(a(le),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):r("",!0)]),parameters:u(()=>[a(e)?(t(),o(a(se),{key:0,"text-to-copy":g.value},{default:u(()=>[w(B,{lang:"json",text:g.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):r("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{ce as default};
