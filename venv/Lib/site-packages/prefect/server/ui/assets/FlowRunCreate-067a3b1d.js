import{b0 as b,d as g,R as v,e as I,_ as k,I as N,aj as S,f as x,i as D,u as e,c as F,j as m,a as T,o as j,n as p,b1 as B,b2 as J,b3 as O,b4 as U,af as d,a_ as i}from"./index-ac1bd61a.js";import{u as A}from"./usePageTitle-4ac27103.js";class P extends b{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const G=g({__name:"FlowRunCreate",setup(f){const t=v(),n=I("deploymentId"),s=k(),y=N("parameters",P,void 0),{deployment:o}=S(n),_=async r=>{var u,a;try{const l=await t.deployments.createDeploymentFlowRun(n.value,r),c=((a=(u=r.state)==null?void 0:u.stateDetails)==null?void 0:a.scheduledTime)??void 0,C=!c,h=O(U,{flowRun:l,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:c});i(h,"success"),s.push(d.deployment(n.value))}catch(l){i("Something went wrong trying to create a flow run","error"),console.error(l)}},R=()=>{s.back()},w=x(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return A(w),(r,u)=>{const a=D("p-layout-default");return e(o)?(j(),F(a,{key:0},{header:m(()=>[p(e(B),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(J),{deployment:e(o),parameters:e(y),onSubmit:_,onCancel:R},null,8,["deployment","parameters"])]),_:1})):T("",!0)}}});export{G as default};
